# ๐๏ธ ุฑุงูููุง ูุตุจ ู ูพฺฉุฑุจูุฏ MinIO (Object Storage ูุญู)

ุงู ุฑุงูููุง ูุฑุงุญู ูุตุจ ู ุฑุงูโุงูุฏุงุฒ MinIO ุจู ุนููุงู Object Storage ูุญู ุจุฑุง ุฐุฎุฑู ูุงูโูุง ุฑุง ุดุฑุญ ูโุฏูุฏ.

## ๐ ูพุดโูุงุฒูุง

- Docker ู Docker Compose ูุตุจ ุดุฏู ุจุงุดุฏ
- ูพูุฑุชโูุง 9000 ู 9001 ุขุฒุงุฏ ุจุงุดูุฏ

## ๐ ูุตุจ ุณุฑุน (Automated Setup)

### ุฑูุด 1: ูพฺฉุฑุจูุฏ ุฎูุฏฺฉุงุฑ (ุชูุตู ูโุดูุฏ)

ุงฺฏุฑ MinIO ุงุฒ ูุจู ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุชุ ุงุฒ ุงู ุงุณฺฉุฑูพุช ุจุฑุง ูพฺฉุฑุจูุฏ ุฎูุฏฺฉุงุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

```bash
# ูพฺฉุฑุจูุฏ ุฎูุฏฺฉุงุฑ Object Storage ุฏุฑ ุฏุชุงุจุณ
npx tsx scripts/configure-object-storage.ts
```

ุงู ุงุณฺฉุฑูพุช ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ:
- โ ุชูุธูุงุช MinIO ุฑุง ุฏุฑ ุฏุชุงุจุณ ุซุจุช ูโฺฉูุฏ
- โ Bucket ุจุง ูุงู `feedban` ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ
- โ ุฏุณุชุฑุณ ุนููู ุจุฑุง ุฏุงูููุฏ ูุงูโูุง ุฑุง ุชูุธู ูโฺฉูุฏ
- โ ููุฑุงู ุขูุงุฏู ุงุณุชูุงุฏู ุงุณุช (ุจุฏูู ูุงุฒ ุจู ูุฑูุฏ ุจู ูพูู ุงุฏูู)

### ุฑูุด 2: ูุตุจ ู ุฑุงูโุงูุฏุงุฒ ฺฉุงูู

```bash
# ุงุฌุฑุง ุงุณฺฉุฑูพุช ุฑุงูโุงูุฏุงุฒ
./scripts/setup-minio.sh
```

ุงู ุงุณฺฉุฑูพุช ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ:
- โ MinIO ุฑุง ุฏุฑ Docker ุงุฌุฑุง ูโฺฉูุฏ
- โ Bucket ุจุง ูุงู `feedban` ุงุฌุงุฏ ูโฺฉูุฏ
- โ ุฏุณุชุฑุณ ุนููู ุจุฑุง ุฏุงูููุฏ ูุงูโูุง ุฑุง ุชูุธู ูโฺฉูุฏ
- โ ุงุทูุงุนุงุช ูพฺฉุฑุจูุฏ ุฑุง ููุงุด ูโุฏูุฏ

### ุฑูุด 2: ุฑุงูโุงูุฏุงุฒ ุฏุณุช

#### ูุฑุญูู 1: ุงุฌุฑุง MinIO

```bash
# ุงุฌุฑุง MinIO container
docker-compose -f docker-compose.minio.yml up -d

# ุจุฑุฑุณ ูุถุนุช
docker ps | grep minio
```

#### ูุฑุญูู 2: ุฏุณุชุฑุณ ุจู MinIO Console

1. ูุฑูุฑฺฏุฑ ุฑุง ุจุงุฒ ฺฉูุฏ ู ุจู ุขุฏุฑุณ ุฒุฑ ุจุฑูุฏ:
   ```
   http://localhost:9001
   ```

2. ุจุง ุงุทูุงุนุงุช ุฒุฑ ูุงุฑุฏ ุดูุฏ:
   - **Username:** `bizbuzz-minio`
   - **Password:** `bizbuzz-minio-secret-key`

#### ูุฑุญูู 3: ุงุฌุงุฏ Bucket

ุฏุฑ MinIO Console:
1. ุฑู **Buckets** ฺฉูฺฉ ฺฉูุฏ
2. ุฑู **Create Bucket** ฺฉูฺฉ ฺฉูุฏ
3. ูุงู bucket ุฑุง `feedban` ูุงุฑุฏ ฺฉูุฏ
4. ุฑู **Create Bucket** ฺฉูฺฉ ฺฉูุฏ

#### ูุฑุญูู 4: ุชูุธู Access Policy

```bash
# ูุตุจ MinIO Client (mc)
# ุจุฑุง macOS:
brew install minio/stable/mc

# ุจุฑุง Linux:
wget https://dl.min.io/client/mc/release/linux-amd64/mc
chmod +x mc
sudo mv mc /usr/local/bin/

# ุชูุธู alias
mc alias set local http://localhost:9000 bizbuzz-minio bizbuzz-minio-secret-key

# ุงุฌุงุฏ bucket (ุงฺฏุฑ ุงุฒ Console ุงุฌุงุฏ ูฺฉุฑุฏูโุงุฏ)
mc mb local/feedban

# ุชูุธู ุฏุณุชุฑุณ ุนููู ุจุฑุง ุฏุงูููุฏ
mc anonymous set download local/feedban
```

## โ๏ธ ูพฺฉุฑุจูุฏ ุฏุฑ ุงูพูฺฉุดู

### ุฑูุด ุฎูุฏฺฉุงุฑ (ุชูุตู ูโุดูุฏ)

ุงุฒ ุงุณฺฉุฑูพุช ูพฺฉุฑุจูุฏ ุฎูุฏฺฉุงุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

```bash
npx tsx scripts/configure-object-storage.ts
```

### ุฑูุด ุฏุณุช (ุงุฎุชุงุฑ)

#### ูุฑุญูู 1: ูุฑูุฏ ุจู ูพูู ุงุฏูู

1. ุจู ุนููุงู **ADMIN** ูุงุฑุฏ ุณุณุชู ุดูุฏ
2. ุจู **ุชูุธูุงุช** ุจุฑูุฏ
3. ุชุจ **Object Storage** ุฑุง ุจุงุฒ ฺฉูุฏ

#### ูุฑุญูู 2: ูุงุฑุฏ ฺฉุฑุฏู ุงุทูุงุนุงุช

ููุฏูุง ุฒุฑ ุฑุง ูพุฑ ฺฉูุฏ:

| ููุฏ | ููุฏุงุฑ |
|------|-------|
| **ูุนุงู** | โ (ฺฺฉ ุจุงุดุฏ) |
| **Endpoint** | `http://localhost:9000` |
| **Bucket** | `feedban` |
| **Access Key ID** | `bizbuzz-minio` |
| **Secret Access Key** | `bizbuzz-minio-secret-key` |
| **Region** | `us-east-1` |
| **Force Path Style** | โ (ฺฺฉ ุจุงุดุฏ) |

### ูุฑุญูู 3: ุฐุฎุฑู ุชูุธูุงุช

ุฑู ุฏฺฉูู **ุฐุฎุฑู** ฺฉูฺฉ ฺฉูุฏ.

## ๐งช ุชุณุช ุนููฺฉุฑุฏ

ูพุณ ุงุฒ ูพฺฉุฑุจูุฏ:

1. ุจู ฺฉ ุงุฒ ูพุฑูฺูโูุง ุจุฑูุฏ
2. ุชุจ **ูุงูโูุง** ุฑุง ุจุงุฒ ฺฉูุฏ
3. ุฑู **ุขูพููุฏ ูุงู** ฺฉูฺฉ ฺฉูุฏ
4. ฺฉ ูุงู ุฑุง ุงูุชุฎุงุจ ู ุขูพููุฏ ฺฉูุฏ
5. ูุงู ุจุงุฏ ุจุง ููููุช ุขูพููุฏ ุดูุฏ

## ๐ ูุฏุฑุช MinIO

### ุฏุณุชุฑุณ ุจู Console

```
URL: http://localhost:9001
Username: bizbuzz-minio
Password: bizbuzz-minio-secret-key
```

### ุฏุณุชูุฑุงุช ููุฏ MinIO Client (mc)

```bash
# ูุณุช ูุงูโูุง bucket
mc ls local/feedban

# ุขูุงุฑ bucket
mc du local/feedban

# ฺฉูพ ูุงู ุจู bucket
mc cp myfile.pdf local/feedban/

# ุญุฐู ูุงู
mc rm local/feedban/myfile.pdf

# ูุดุงูุฏู ูุงฺฏโูุง
docker logs feedban-minio
```

## ๐ง ุนุจโุงุจ

### ุฎุทุง: ูพูุฑุช ุฏุฑ ุญุงู ุงุณุชูุงุฏู ุงุณุช

```bash
# ุจุฑุฑุณ ูพูุฑุชโูุง ุงุณุชูุงุฏู ุดุฏู
lsof -i :9000
lsof -i :9001

# ุชููู container
docker-compose -f docker-compose.minio.yml down
```

### ุฎุทุง: ุชูุธูุงุช Object Storage ุงูุฌุงู ูุดุฏู

ุงู ุฎุทุง ุฒูุงู ุฑุฎ ูโุฏูุฏ ฺฉู:
- MinIO ุงุฌุฑุง ูุดุฏู ุจุงุดุฏ
- ุชูุธูุงุช ุฏุฑ ูพูู ุงุฏูู ูุงุฑุฏ ูุดุฏู ุจุงุดูุฏ
- Endpoint ุง Credentials ุงุดุชุจุงู ุจุงุดูุฏ

**ุฑุงู ุญู:**
1. ูุทูุฆู ุดูุฏ MinIO ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช: `docker ps`
2. ุชูุธูุงุช ุฑุง ุฏุฑ ูพูู ุงุฏูู ุจุฑุฑุณ ฺฉูุฏ
3. Endpoint ุฑุง ุจุง `http://localhost:9000` ุชุณุช ฺฉูุฏ

### ุฎุทุง: ุฏุณุชุฑุณ ุฑุฏ ุดุฏ

```bash
# ุจุฑุฑุณ bucket policy
mc anonymous get local/feedban

# ุชูุธู ูุฌุฏุฏ policy
mc anonymous set download local/feedban
```

### ูพุงฺฉ ฺฉุฑุฏู ุฏุงุฏูโูุง ู ุดุฑูุน ุงุฒ ูู

```bash
# ุชููู ู ุญุฐู container ู volumes
docker-compose -f docker-compose.minio.yml down -v

# ุงุฌุฑุง ูุฌุฏุฏ
docker-compose -f docker-compose.minio.yml up -d

# ุงุฌุฑุง ูุฌุฏุฏ ุงุณฺฉุฑูพุช setup
./scripts/setup-minio.sh
```

## ๐ ุณุงุฎุชุงุฑ ูุงูโูุง ุฏุฑ MinIO

ูุงูโูุง ุจุง ุณุงุฎุชุงุฑ ุฒุฑ ุฏุฑ bucket ุฐุฎุฑู ูโุดููุฏ:

```
feedban/
โโโ projects/
โ   โโโ {projectId}/
โ       โโโ {filename}
โโโ organization/
    โโโ {filename}
```

## ๐ ุงููุช

โ๏ธ **ูุดุฏุงุฑ ุงููุช:**

ุงู ูพฺฉุฑุจูุฏ ููุท ุจุฑุง ูุญุท ุชูุณุนู (Development) ุงุณุช.

ุจุฑุง ูุญุท ุชููุฏ (Production):
- โ ุงุฒ ุฑูุฒ ุนุจูุฑ ูู ุงุณุชูุงุฏู ฺฉูุฏ
- โ Endpoint ุฑุง ุจู ุฏุงููู ุงุตู ุชุบุฑ ุฏูุฏ
- โ ุงุฒ HTTPS ุงุณุชูุงุฏู ฺฉูุฏ
- โ ุฏุณุชุฑุณโูุง ุฑุง ูุญุฏูุฏ ฺฉูุฏ
- โ ุงุฒ ุณุฑูุณโูุง ุงุจุฑ ูุซู Liara Object Storage ุงุณุชูุงุฏู ฺฉูุฏ

## ๐ ุงุณุชูุงุฏู ุงุฒ Liara Object Storage (Production)

ุจุฑุง ูุญุท ุชููุฏุ ุชูุตู ูโุดูุฏ ุงุฒ Liara Object Storage ุงุณุชูุงุฏู ฺฉูุฏ:

1. ูุงุฑุฏ ูพูู Liara ุดูุฏ
2. ฺฉ Object Storage ุงุฌุงุฏ ฺฉูุฏ
3. ุงุทูุงุนุงุช ุขู ุฑุง ุฏุฑ ุชูุธูุงุช ูุงุฑุฏ ฺฉูุฏ:
   - **Endpoint:** `https://storage.iran.liara.space`
   - **Bucket:** ูุงู bucket ุดูุง
   - **Access Key & Secret:** ุงุฒ ูพูู Liara

## ๐ ููุงุจุน

- [MinIO Documentation](https://min.io/docs/minio/linux/index.html)
- [MinIO Client (mc) Guide](https://min.io/docs/minio/linux/reference/minio-mc.html)
- [Liara Object Storage](https://docs.liara.ir/object-storage/about/)

## ๐ ฺฉูฺฉ ู ูพุดุชุจุงู

ุงฺฏุฑ ุจุง ูุดฺฉู ููุงุฌู ุดุฏุฏ:
1. ุงุจุชุฏุง ุจุฎุด ุนุจโุงุจ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. ูุงฺฏโูุง Docker ุฑุง ุจุฑุฑุณ ฺฉูุฏ: `docker logs feedban-minio`
3. ุชูุธูุงุช ุฑุง ุจุง ุงู ุณูุฏ ููุงุณู ฺฉูุฏ
